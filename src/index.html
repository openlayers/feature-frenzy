<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <title>Feature Frenzy</title>
  <link href="./big/big.css" rel="stylesheet" type="text/css" />
  <link href="./big/highlight.css" rel="stylesheet" type="text/css" />
  <style>
    body {
      font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
    }

    .bright {
      background: #FDCC32;
    }

    .block {
      display: block;
    }

    h1 {
      text-align: center;
    }

    .center {
      text-align: center;
    }

    .slide-container {
      justify-content: center;
    }

    a {
      text-decoration: none;
    }

    div.slide {
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: inherit;
    }
  </style>
  <script type="module" src="./show.js"></script>
</head>

<body class="light">

  <div data-bodyclass="bright center">
    <p>OpenLayers</p>
    <small>Feature Frenzy</small>
  </div>
  <div data-bodyclass="bright center">
    <p>andreas@ahocevar.com</p>
    <br>
    <p>tim@planet.com</p>
  </div>

  <div data-bodyclass="bright center">
    <h1>New to OpenLayers?</h1>
    <br>
    <div>
      <code>npm install ol</code>
    </div>
    <br>
    <p>Let's dive in! üöÄ</p>
  </div>

  <!-- Tim -->
  <div>
    <h1>View Animation</h1>
    <pre><code>
view.animate({
  duration: 1500,
  center: [-110, 45],
  rotation: Math.PI / 4,
  zoom: 12
})
    </code></pre>
  </div>

  <div>
    <h1>View Animation</h1>
    <pre><code>
view.animate({
  duration: 1500,
  <span class="bright">center: [-110, 45],</span>
  rotation: Math.PI / 4,
  zoom: 12
})
    </code></pre>
  </div>

  <div>
    <h1>Animation Chaining ‚õì</h1>
    <pre><code>
view.animate({
  center: london,
  easing: easeIn
}, {
  center: rome,
  easing: easeOut
}, function() {
  // all done
});
    </code></pre>
  </div>

  <div style="width: 100%; height: 100%;">
    <iframe src="./view-animation.html" frameBorder="0" style="width: 100%; height: 100%;"></iframe>
  </div>

  <div>
    <h1>Use Geographic ‚öóÔ∏è</h1>
    <pre><code>
import {useGeographic} from 'ol/proj';

useGeographic();

// use [longitude, latitude] in API
view.setCenter([-110, 45]);
    </code></pre>
  </div>

  <!-- Andreas -->
  <div>
    <h1>Reprojection</h1>
    <pre><code>
const view = new View({
  projection: custom
});

const source = new VectorSource({
  url: 'https://example.com/world.json',
  format: new GeoJSON()
});
    </code></pre>
  </div>
  <div>
    <h1>Reprojection
      <br>(raster too üí™)</h1>
    <pre><code>
const view = new View({
  projection: custom
});

const source = new XYZSource({
  projection: mercator
});
    </code></pre>
  </div>
  
  <div style="width: 100%; height: 100%;">
    <iframe src="./reprojection.html" frameBorder="0" style="width: 100%; height: 100%;"></iframe>
  </div>

  <!-- Tim -->
  <div>
    <h1>GeoTIFF Sources üéâ</h1>
    <pre><code>
import GeoTIFF from 'ol/source/GeoTIFF';

const source = new GeoTIFF({
  sources: [
    {url: 'https://example.com/world.tif'},
  ]
});
    </code></pre>
  </div>

  <div>
    <h1>GeoTIFF Sources üéâ</h1>
    <pre><code>
import GeoTIFF from 'ol/source/GeoTIFF';

const source = new GeoTIFF({
  sources: [
    {url: 'https://example.com/B08.tif'},
    {url: 'https://example.com/B04.tif'},
    {url: 'https://example.com/B02.tif'},
  ]
});
    </code></pre>
  </div>

  <div style="width: 100%; height: 100%;">
    <iframe src="./cog-viewer.html" frameBorder="0" style="width: 100%; height: 100%;"></iframe>
  </div>

  <div>
    <h1>Pixel Data</h1>
    <pre><code>
map.on('pointermove', event => {
  const data = <span class="bright">layer.getData(event.pixel)</span>;
  // do something with the pixel data
  console.log(data);
});
    </code></pre>
  </div>

  <div>
    <h1>Resolving Views üå±</h1>
    <pre><code>
import GeoTIFF from 'ol/source/GeoTIFF';

const source = new GeoTIFF(options);

const map = new Map({
  target: 'container',
  layers: [new TileLayer({source})],
  <span class="bright">view: source.getView(),</span>
});
    </code></pre>
  </div>

  <!-- Andreas -->
  <div>
    <h1>Feature interaction<br>hit detection</h1>
    <pre><code>
      map.on('pointermove', event => {
        layer
          .getFeatures(event.pixel)
          .then(showProperties);
      });
    </code></pre>
  </div>

  <div>
    <h1>Feature interaction<br>selection by id</h1>
    <pre><code>
      const selection = new VectorTileLayer({
        source: layer.getSource()
      });

      layer.getFeatures(pixel).then(features => {
        const selected = features.map(f => f.getId());
        selection.setStyle(f =>
          selected.includes(f.getId())
            ? selectStyle
            : null
        );
      });
    </code></pre>
  </div>


  <div style="width: 100%; height: 100%;">
    <iframe src="./feature-interaction.html" frameBorder="0" style="width: 100%; height: 100%;"></iframe>
  </div>

  <!-- Tim -->
  <div>
    <h1>Feature Editing üî®</h1>
    <pre><code>
import {Draw, Modify, Snap} from 'ol/interaction';

map.addInteraction(
  new Draw({type: 'Polygon', source: source})
);
    </code></pre>
  </div>

  <div>
    <h1>Feature Editing üî®</h1>
    <pre><code>
import {Draw, Modify, Snap} from 'ol/interaction';

map.addInteraction(
  new Modify({source: source})
);
    </code></pre>
  </div>

  <div>
    <h1>Feature Editing üî®</h1>
    <pre><code>
import {Draw, Modify, Snap} from 'ol/interaction';

map.addInteraction(
  new Snap({source: source})
);
    </code></pre>
  </div>

  <div style="width: 100%; height: 100%;">
    <iframe src="./feature-editor.html" frameBorder="0" style="width: 100%; height: 100%;"></iframe>
  </div>

  <!-- Andreas -->
  <div>
    <h1>Vector tiles</h1>
    <pre><code>
import MapboxVectorLayer from 'ol/layer/MapboxVector';

new MapboxVectorLayer({
  styleUrl:
    'https://api.maptiler.com/maps/bright/style.json',
});
    </code></pre>
  </div>
  <div>
    <h1>Decluttered labels
      <br>and symbols</h1>
    <pre><code>
import VectorTileLayer from 'ol/layer/VectorTile';
import VectorLayer from 'ol/layer/Vector';

const vectorTile = new VectorTileLayer({
  declutter: true
});

const vector = new VectorLayer({
  declutter: true
});
    </code></pre>
  </div>
  <div>
    <h1>Labels along lines</h1>
    <pre><code>
import {Style, Text} from 'ol/style';

layer.setStyle(feature => {
  return new Style({
    text: new Text({
      placement: 'line',
      text: feature.get('name'),
    }),
  });
});
    </code></pre>
  </div>
  <div>
    <h1>Mapbox Style
      <br>(not only vector tiles üò≤)</h1>
    <pre><code>
import olms 'ol-mapbox-style';

olms('map', 'https://api.maptiler.com/maps/bright/style.json');
    </code></pre>
  </div>

  <div style="width: 100%; height: 100%;">
    <iframe src="./vector-tiles.html" frameBorder="0" style="width: 100%; height: 100%;"></iframe>
  </div>

  <!-- Tim -->
  <div>
    <h1>OGC API ‚Äì Tiles ‚öóÔ∏è
      <br>(raster)
    </h1>
    <pre><code>
import OGCMapTile from 'ol/source/OGCMapTile';
import TileLayer from 'ol/layer/Tile';

const layer = new TileLayer({
  source: new OGCMapTile({
    url: 'https://example.com/bluemarble/mercator'
  })
});
    </code></pre>
  </div>

  <div>
    <h1>OGC API ‚Äì Tiles ‚öóÔ∏è
      <br>(vector)
    </h1>
    <pre><code>
import MVT from 'ol/format/MVT';
import OGCVectorTile from 'ol/source/OGCVectorTile';
import VectorTileLayer from 'ol/layer/VectorTile';

const layer = new VectorTileLayer({
  source: new OGCVectorTile({
    url: 'https://example.com/countries/mercator',
    format: new MVT(),
  })
});
    </code></pre>
  </div>

  <div style="width: 100%; height: 100%;">
    <iframe src="./ogc-tiles.html" frameBorder="0" style="width: 100%; height: 100%;"></iframe>
  </div>

  <!-- Andreas -->
  <div>
    <h1>WebGL Points üöÄ</h1>
    <pre><code>
import WebGLPointsLayer from 'ol/layer/WebGLPoints';

new WebGLPointsLayer({
  source: vectorSource,
  style: {
    symbol: {
      symbolType: 'circle',
      color: 'red',
      size: 12,
      opacity: 1
    }
  }
});
    </code></pre>
  </div>

  <div>
    <h1>WebGL Points<br>(attribute math)</h1>
    <pre><code>
const size = ['^', ['get', 'mass'], 0.2];
const minYear = 1850;
const maxYear = 2015;
const delta = ['-', maxYear, ['get', 'year']];
const opacity = ['/', delta, maxYear - minYear];
    </code></pre>
  </div>

  <div>
    <h1>WebGL Points<br>(variables and filters)</h1>
    <pre><code>
const periodEnd = ['var', 'currentYear'];
const periodStart = ['-', periodEnd, 10];
const style = {
  variables: {currentYear: 1950},
  filter: [
    'between', ['get', 'year'], periodStart, periodEnd
  ],
  // ...
};
    </code></pre>
  </div>

  <div style="width: 100%; height: 100%;">
    <iframe src="./webgl-points.html" frameBorder="0" style="width: 100%; height: 100%;"></iframe>
  </div>

  <!-- Tim -->
  <div>
    <h1>WebGL Tiles
      <br>(band math)</h1>
    <pre><code>
const red = ['band', 3];
const nir = ['band', 4];
const diff = ['-', nir, red];
const sum = ['+', nir, red];

const ndvi = ['/', diff, sum];
    </code></pre>
  </div>

  <div>
    <h1>WebGL Tiles
      <br>(style expressions)</h1>
    <pre><code>
const layer = new TileLayer({
  source: new GeoTIFF(options),
  style: {
    color: [
      'interpolate', ['linear'], ndvi,
      -1, 'rgb(100, 100, 100)',
      1, 'rgb(0, 69, 0)'
    ],
  }
})
    </code></pre>
  </div>

  <div style="width: 100%; height: 100%;">
    <iframe src="./ndvi.html" frameBorder="0" style="width: 100%; height: 100%;"></iframe>
  </div>

  <div>
    <h1>WebGL Tiles
      <br>(variables)</h1>
    <pre><code>
const style = {
  variables: {
    seaLevel: 0,
  },
  color: [
    'case',
    ['&lt;=', elevation, ['var', 'seaLevel']],
    [139, 212, 255, 1],
    [139, 212, 255, 0],
  ],
}
    </code></pre>
  </div>

  <div>
    <h1>WebGL Tiles
      <br>(variables)</h1>
    <pre><code>
slider.addEventListener('input', () => {
  layer.updateStyleVariables({
    seaLevel: parseFloat(slider.value)
  });
});
    </code></pre>
  </div>

  <div style="width: 100%; height: 100%;">
    <iframe src="./sea-level.html" frameBorder="0" style="width: 100%; height: 100%;"></iframe>
  </div>

  <div>
    <h1>DX</h1>
    <center>OpenLayers is JSDoc typed</center>
    <center>We publish type definitions</center>
    <center>You get type checking, autocomplete and hints! ü§©</center>
  </div>

  <div>
    <img src="./data/dx.gif">
  </div>

  <div data-bodyclass="bright">
    <h1>thanks</h1>
    <center>Consider becoming a sponsor</center>
    <br>
    <center>project:<br><a href="https://github.com/sponsors/openlayers">https://github.com/sponsors/openlayers</a></center>
    <br>
    <center>developers:<br><a id="sponsor-dev"></a></center>
    <script>
      const devs = ['tschaub', 'ahocevar', 'twpayne', 'fredj', 'elemoine', 'crschmidt', 'marcjansen', 'mike-000', 'jahow', 'probins', 'MoonE', 'schuyler', 'bartvde', 'tonio', 'gberaudo', 'petrsloup', 'simonseyock', 'bbinet', 'fgravin', 'GaborFarkas', 'pgiraud', 'pagameba', 'schmidtk', 'bjornharrtell']
      const sponsorDev = document.getElementById('sponsor-dev');
      let index = 0;
      setInterval(() => {
        const link = `https://github.com/sponsors/${devs[index]}`;
        sponsorDev.href = link;
        sponsorDev.innerText = link;
        index = ++index % devs.length;
      }, 500);
    </script>
  </div>

</body>

</html>
